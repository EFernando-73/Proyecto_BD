{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>{% block title %}Sistema de Facturación{% endblock %}</title>

    <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>Proyecto Sistema De Ventas</title>

    <!-- Custom fonts for this template-->
    <link href="{% static  'base/vendor/fontawesome-free/css/all.min.css' %}" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">

    <!-- Custom styles for this template-->
    <link href="{% static 'base/css/sb-admin-2.min.css' %}" rel="stylesheet">
    
    <!-- Custom styles for this page -->
    <link href="{% static 'base/vendor/datatables/dataTables.bootstrap4.min.css'%}" rel="stylesheet">
    <!-- JQuery Confirm-->
    <link href="{% static 'base/vendor/jquery_confirm/jquery-confirm.min.css'%}" rel="stylesheet">

    <!-- XDSoft DateTimePicker -->  
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-datetimepicker/2.5.20/jquery.datetimepicker.min.css" integrity="sha256-DOS9W6NR+NFe1fUhEE0PGKY/fubbUCnOfTje2JMDw3Y=" crossorigin="anonymous" />

    <link rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.15.3/dist/bootstrap-table.min.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.8/css/select2.min.css" rel="stylesheet" />
    
    <!-- Fuentes personalizadas -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Estilos personalizados -->
    <style>
        body {
            font-family: 'Poppins', sans-serif;
        }
    </style>
    
    {% block extra_css %}{% endblock %}
</head>

<body class="bg-gray-100">
    <div class="flex h-screen bg-gray-100">
        <!-- Sidebar -->
        <aside class="w-64 bg-gray-800 text-white">
            <div class="p-4">
                <h1 class="text-2xl font-semibold">SCF Django</h1>
            </div>
            <nav class="mt-4">
                <a href="{% url 'bases:home' %}" class="block py-2 px-4 hover:bg-gray-700">
                    <i class="fas fa-tachometer-alt mr-2"></i> Dashboard
                </a>
            </nav>
        </aside>

        <!-- Contenido principal -->
        <main class="flex-1 overflow-x-hidden overflow-y-auto">
            <!-- Navbar -->
            <nav class="bg-white shadow-md">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="flex justify-between h-16">
                        <div class="flex">
                            <div class="flex-shrink-0 flex items-center">
                                Sistema de facturacion 
                            </div>
                        </div>
                        <div class="flex items-center">
                            <div class="ml-3 relative" x-data="{ open: false }">
                                <div>
                                    <button @click="open = !open" class="flex text-sm border-2 border-transparent rounded-full focus:outline-none focus:border-gray-300 transition duration-150 ease-in-out">
                                        <img class="h-8 w-8 rounded-full" src="{% static 'base/img/user.png' %}" alt="{{ user.username }}">
                                    </button>
                                </div>
                                <div x-show="open" @click.away="open = false" class="origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg">
                                    <div class="py-1 rounded-md bg-white shadow-xs">
                                        <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-toggle="modal" data-target="#logoutModal">Cerrar sesión</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </nav>

            <!-- Contenido de la página -->
            <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-8">
                {% block page_content %}
                <div class="mb-8">
                    <h1 class="text-3xl font-bold text-gray-900">Bienvenido. Elija una opción</h1>
                    <p class="mt-2 text-sm text-gray-600">
                        Recuerde que siempre puede explorar el menú completo haciendo click en la parte superior izquierda
                    </p>
                </div>
                
                <!-- Catálogos -->
                <h2 class="text-2xl font-semibold mb-4">Catálogos</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
                    {% if perms.inv.view_categoria %}
                    <a href="{% url 'inv:categoria_list' %}" class="block p-6 bg-white rounded-lg border border-gray-200 shadow-md hover:bg-gray-100">
                        <div class="flex flex-col items-center text-center">
                            <div class="p-3 bg-blue-100 rounded-full mb-4">
                                <i class="fas fa-tags text-blue-500 text-3xl"></i>
                            </div>
                            <h3 class="text-xl font-semibold mb-2">Categorías</h3>
                            <p class="text-sm text-gray-600">Gestionar categorías de productos</p>
                        </div>
                    </a>
                    {% endif %}
                    {% if perms.inv.view_subcategoria %}
                    <a href="{% url 'inv:subcategoria_list' %}" class="block p-6 bg-white rounded-lg border border-gray-200 shadow-md hover:bg-gray-100">
                        <div class="flex flex-col items-center text-center">
                            <div class="p-3 bg-green-100 rounded-full mb-4">
                                <i class="fas fa-tag text-green-500 text-3xl"></i>
                            </div>
                            <h3 class="text-xl font-semibold mb-2">Subcategorías</h3>
                            <p class="text-sm text-gray-600">Gestionar subcategorías de productos</p>
                        </div>
                    </a>
                    {% endif %}
                    {% if perms.inv.view_marca %}
                    <a href="{% url 'inv:marca_list' %}" class="block p-6 bg-white rounded-lg border border-gray-200 shadow-md hover:bg-gray-100">
                        <div class="flex flex-col items-center text-center">
                            <div class="p-3 bg-yellow-100 rounded-full mb-4">
                                <i class="fas fa-copyright text-yellow-500 text-3xl"></i>
                            </div>
                            <h3 class="text-xl font-semibold mb-2">Marcas</h3>
                            <p class="text-sm text-gray-600">Gestionar marcas de productos</p>
                        </div>
                    </a>
                    {% endif %}
                    {% if perms.inv.view_unidadmedida %}
                    <a href="{% url 'inv:um_list' %}" class="block p-6 bg-white rounded-lg border border-gray-200 shadow-md hover:bg-gray-100">
                        <div class="flex flex-col items-center text-center">
                            <div class="p-3 bg-red-100 rounded-full mb-4">
                                <i class="fas fa-ruler text-red-500 text-3xl"></i>
                            </div>
                            <h3 class="text-xl font-semibold mb-2">Unidades de Medida</h3>
                            <p class="text-sm text-gray-600">Gestionar unidades de medida</p>
                        </div>
                    </a>
                    {% endif %}
                    {% if perms.inv.view_producto %}
                    <a href="{% url 'inv:producto_list' %}" class="block p-6 bg-white rounded-lg border border-gray-200 shadow-md hover:bg-gray-100">
                        <div class="flex flex-col items-center text-center">
                            <div class="p-3 bg-purple-100 rounded-full mb-4">
                                <i class="fas fa-box text-purple-500 text-3xl"></i>
                            </div>
                            <h3 class="text-xl font-semibold mb-2">Productos</h3>
                            <p class="text-sm text-gray-600">Gestionar productos</p>
                        </div>
                    </a>
                    {% endif %}
                    {% if perms.cmp.view_proveedor %}
                    <a href="{% url 'cmp:proveedor_list' %}" class="block p-6 bg-white rounded-lg border border-gray-200 shadow-md hover:bg-gray-100">
                        <div class="flex flex-col items-center text-center">
                            <div class="p-3 bg-indigo-100 rounded-full mb-4">
                                <i class="fas fa-truck text-indigo-500 text-3xl"></i>
                            </div>
                            <h3 class="text-xl font-semibold mb-2">Proveedores</h3>
                            <p class="text-sm text-gray-600">Gestionar proveedores</p>
                        </div>
                    </a>
                    {% endif %}
                    {% if perms.fac.view_cliente %}
                    <a href="{% url 'fac:cliente_list' %}" class="block p-6 bg-white rounded-lg border border-gray-200 shadow-md hover:bg-gray-100">
                        <div class="flex flex-col items-center text-center">
                            <div class="p-3 bg-pink-100 rounded-full mb-4">
                                <i class="fas fa-users text-pink-500 text-3xl"></i>
                            </div>
                            <h3 class="text-xl font-semibold mb-2">Clientes</h3>
                            <p class="text-sm text-gray-600">Gestionar clientes</p>
                        </div>
                    </a>
                    {% endif %}
                </div>
                
                <!-- Movimientos -->
                <h2 class="text-2xl font-semibold mb-4">Movimientos</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <a href="{% url 'cmp:compras_list' %}" class="block p-6 bg-white rounded-lg border border-gray-200 shadow-md hover:bg-gray-100">
                        <div class="flex flex-col items-center text-center">
                            <div class="p-3 bg-green-100 rounded-full mb-4">
                                <i class="fas fa-shopping-cart text-green-500 text-3xl"></i>
                            </div>
                            <h3 class="text-xl font-semibold mb-2">Compras</h3>
                            <p class="text-sm text-gray-600">Gestionar compras a proveedores</p>
                        </div>
                    </a>
                    <a href="{% url 'fac:factura_list' %}" class="block p-6 bg-white rounded-lg border border-gray-200 shadow-md hover:bg-gray-100">
                        <div class="flex flex-col items-center text-center">
                            <div class="p-3 bg-blue-100 rounded-full mb-4">
                                <i class="fas fa-file-invoice-dollar text-blue-500 text-3xl"></i>
                            </div>
                            <h3 class="text-xl font-semibold mb-2">Facturas</h3>
                            <p class="text-sm text-gray-600">Gestionar facturas de ventas</p>
                        </div>
                    </a>
                </div>
                {% endblock %}
            </div>
        </main>
    </div>

    <!-- Modal de cierre de sesión -->
    <div id="logoutModal" class="fixed z-10 inset-0 overflow-y-auto hidden" aria-labelledby="modal-title" role="dialog" aria-modal="true">
      <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
        <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity" aria-hidden="true"></div>
        
        <!-- This element is to trick the browser into centering the modal contents. -->
        <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>
        
        <div class="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full">
          <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
            <div class="sm:flex sm:items-start">
              <div class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left">
                <h3 class="text-lg leading-6 font-medium text-gray-900" id="modal-title">
                  ¿Cerrar Sesión para <span class="font-bold">{{ user.username }}</span>?
                </h3>
                <div class="mt-2">
                  <p class="text-sm text-gray-500">
                    Al dar Click en el botón Salir, cerrará la sesión para <span class="font-bold">{{ user.username }}</span>.
                  </p>
                </div>
              </div>
            </div>
          </div>
          <div class="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
            <form method="POST" action="{% url 'bases:logout' %}">
              {% csrf_token %}
              <button type="submit" class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm">
                Salir
              </button>
            </form>
            <button type="button" class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm" onclick="closeLogoutModal()">
              Cancelar
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine.min.js" defer></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Al final del body -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

    <script src="{% static  'base/vendor/jquery/jquery.min.js' %}"></script>
    <script src="{% static  'base/vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>

    <!-- Core plugin JavaScript-->
    <script src="{% static  'base/vendor/jquery-easing/jquery.easing.min.js' %}"></script>

    <!-- Custom scripts for all pages-->
    <script src="{% static  'base/js/sb-admin-2.min.js' %}"></script>

    <!-- Page level plugins -->
    <script src="{% static 'base/vendor/datatables/jquery.dataTables.min.js'%}"></script>
    <script src="{% static 'base/vendor/datatables/dataTables.bootstrap4.min.js' %}"></script>   

    <script src="{% static 'base/vendor/jquery_confirm/jquery-confirm.min.js' %}"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-datetimepicker/2.5.20/jquery.datetimepicker.full.min.js" integrity="sha256-FEqEelWI3WouFOo2VWP/uJfs1y8KJ++FLh2Lbqc8SJk=" crossorigin="anonymous"></script>
    
    <script src="https://unpkg.com/bootstrap-table@1.15.3/dist/bootstrap-table.min.js"></script>
    <script src="https://unpkg.com/bootstrap-table@1.15.3/dist/bootstrap-table-locale-all.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.8/js/select2.min.js"></script>

    <script src="{% static  'base/js/jquery.chained.min.js' %}"></script>

  <script>
    $(document).ready(function () {
      jQuery.datetimepicker.setLocale('es');
    });
  </script>

    
    {% block extra_js %}{% endblock %}
    <script>
      function openLogoutModal() {
        document.getElementById('logoutModal').classList.remove('hidden');
      }
    
      function closeLogoutModal() {
        document.getElementById('logoutModal').classList.add('hidden');
      }
    </script>
</body>
</html>